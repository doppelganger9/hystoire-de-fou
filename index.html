<html>
    <head>
        <title>Hystoire de Fou</title>
        <link rel="stylesheet" href="styles.css">
        <script type="module" src="vue-app.mjs"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Caveat">
        <!-- 
            fonts: Brush (les paragraphes sur la blague des fous qui peignent le plafonds)  
            blackmail/collage : titre de page en haut à droite/gauche
            Garamond : texte normal
            Freestyle Script : titre de paragraphes / Brush Script MT (non payant)
        -->
    </head>
    <body>
        <h1>Hystoire de Fou</h1>
        <h2>Fiche de Personnage intéractive</h2>
        <div id="app" :class="'visible'" class="hidden">
            <!-- affiché avant que l'app soit prête -->
            <h3 v-if="false" class="visible">En cours de chargement...</h3>
            <!-- affichage d'un voile sous les popups -->
            <div :class="hiddenVoile ? 'voile hidden' : 'voile'" @click.prevent.stop="masqueTout"></div>
            <!-- popup d'info -->
            <div :class="'popup '+(hiddenInfos ? 'hidden' : '')">
                <button class="abs-top-right-10" v-on:click="masqueInfos">X</button>
                <div class="contents" v-html="infos"></div>
                <button v-on:click="masqueInfos">Fermer</button>
            </div>
            <button v-if="creationFinie && mode === 'création'" v-on:click="passerEnMode('jeu')">Création de personnage terminée</button>
            <!-- popup ajout compétence (professionnelle, normal ou démentielle) -->
            <div :class="'popup '+(hiddenPopupCompetence ? 'hidden' : '')">
                <button class="abs-top-right-10" v-on:click="masqueTout">X</button>
                <div class="contents">
                    <h3>Nouvelle Compétence {{ nouvelleCompetence.dementielle ? "Démentielle" : ""}}{{ nouvelleCompetence.professionnelle ? "Professionnelle" : ""}}</h3>
                    <div>
                        <label for="nouvelleCompetence.intitule">Intitulé :</label>
                        <input name="nouvelleCompetence.intitule" v-model="nouvelleCompetence.intitule" type="text" class="handwritten">
                        <br/>
                    </div>
                    <div>
                        <label for="nouvelleCompetence.nomCaracteristiqueDirectrice">Caractéristique directrice :</label>
                        <select v-model="nouvelleCompetence.nomCaracteristiqueDirectrice"
                                name="nouvelleCompetence.nomCaracteristiqueDirectrice"
                                v-on:change="nouvelleCompetenceNomCaracteristiqueDirectriceChanged">
                            <option disabled value="">Please select one</option>
                            <option value="charisme">CHARISME</option>
                            <option value="perception">PERCEPTION</option>
                            <option value="constitution">CONSTITUTION</option>
                            <option value="agilite">AGILITE</option>
                            <option value="entendement">Entendement</option>
                        </select>
                        <br/>
                    </div>
                    <div>
                        <label for="nouvelleCompetence.valeurCaracteristiqueDirectrice">Valeur caractéristique directrice :</label>
                        <input name="nouvelleCompetence.valeurCaracteristiqueDirectrice" :value="nouvelleCompetence.valeurCaracteristiqueDirectrice" type="number" min="6" max="15" class="handwritten" readonly="readonly">
                        <br/>
                    </div>

                    <div v-if="!nouvelleCompetence.dementielle&&!nouvelleCompetence.professionnelle">
                        <label for="nouvelleCompetence.base">Base :</label>
                        <input name="nouvelleCompetence.base" v-model="nouvelleCompetence.base" type="number" class="handwritten" min="0" max="1">
                        <br/>
                    </div>
                    <div v-if="!nouvelleCompetence.dementielle && !nouvelleCompetence.professionnelle && perso.pointsDeGeneration>0">
                        <label for="nouvelleCompetence.pointsDeGeneration">Points de Génération :</label>
                        <input name="nouvelleCompetence.pointsDeGeneration" v-model="nouvelleCompetence.pointsDeGeneration" type="number" min="0" max="4" class="handwritten">
                        <br/>
                    </div>
                    <div>
                        <label for="nouvelleCompetence.valeur">Valeur :</label>
                        <input name="nouvelleCompetence.valeur" :value="nouvelleCompetence.valeur" type="number" class="handwritten" readonly="readonly">
                        <br/>
                    </div>
                </div>
                <button v-on:click="valideAjoutCompetence(nouvelleCompetence)">Valider</button>
                <button v-on:click="masqueTout">Annuler</button>
            </div>

            <hdf-bloc-etat-civil :mode="mode" :perso="perso"></hdf-bloc-etat-civil>
            <hdf-bloc-sante-mentale :mode="mode" :perso="perso"></hdf-bloc-sante-mentale>
            <hdf-bloc-sante :mode="mode" :perso="perso"></hdf-bloc-sante>
            <hdf-bloc-caracteristiques :mode="mode" :perso="perso" @affiche-infos="afficheInfos"></hdf-bloc-caracteristiques>
            <hdf-bloc-competences :mode="mode" :perso="perso" @nouvelle-competence="onNouvelleCompetence"></hdf-bloc-competences>
            <hdf-bloc-competences-dementielles :mode="mode" :perso="perso" @nouvelle-competence="onNouvelleCompetence"></hdf-bloc-competences-dementielles>
            <hdf-bloc-equipement :mode="mode" :perso="perso"></hdf-bloc-equipement>

        </div>
    </body>
</html>